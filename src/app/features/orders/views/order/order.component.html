<ion-header>
  <ion-toolbar color="primary">
    <ion-title>
      {{store.state.orderName}}
    </ion-title>
    <ion-buttons slot="end">
      <ion-back-button (click)="store.onBack()"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content [formGroup]="dataService.deliverForm">
  <div class="product-area">
    <div class="product-img">
      <img src="../../../../../assets/img/blank-photo.png" *ngIf="dataService.deliverForm.get('productImg').value === null">
      <img [src]="imageService.safePhotoURL(dataService.deliverForm.get('productImg').value)" *ngIf="dataService.deliverForm.get('productImg').value !== null">
    </div>
  </div>
  <ion-grid>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label>Name:</ion-label>
          <ion-input formControlName="name" readonly></ion-input>
        </ion-item>
      </ion-col>
      <ion-col>
        <ion-item>
          <ion-label>Quantity:</ion-label>
          <ion-input formControlName="quantity" readonly></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label>Price:</ion-label>
          <ion-input formControlName="price" readonly></ion-input>
        </ion-item>
      </ion-col>
      <ion-col>
        <ion-item>
          <ion-label>Subtotal:</ion-label>
          <ion-input formControlName="subtotal" readonly></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label>Order By:</ion-label>
          <ion-input formControlName="customerName" readonly></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label>Phone No:</ion-label>
          <ion-input formControlName="customerMobileNum" readonly></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label>Date:</ion-label>
          <ion-input formControlName="orderDate" readonly></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label>Address:</ion-label>
          <ion-input formControlName="shippingAddress" readonly></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label>Order Note:</ion-label>
        <ion-input formControlName="orderNote" readonly></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <div class="action-input margin-top">
      <ion-row>
        <ion-col>
          <ion-item>
            <ion-label>Courier</ion-label>
            <ion-select (ionChange)="store.onCourierOk($event)" formControlName="courierNameHolder" [selectedText]="store.state.courierName">
              <ion-select-option *ngFor="let courier of store.state.couriers" [value]="courier.id" [disabled]="store.state.userType === 'Buyer'">
                {{courier.first_name+" "+courier.last_name}}
              </ion-select-option>
            </ion-select>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-item>
            <ion-label position="floating">Phone No:</ion-label>
            <ion-input formControlName="courierPhoneNum" readonly></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
      <p class="warning-msg" *ngIf="store.state.warningMsg !== null">{{store.state.warningMsg}}</p>
      <ion-button
      class="margin-top"
      expand="block"
      [disabled]="store.state.orderStatus !== 'On The Way' ||
      store.state.orderStatus === 'Deliver'"
      (click)="store.onLocationBtnClick()"
      >Location</ion-button>
      <ion-button
       expand="block"
      (click)="store.onSubmit(dataService.deliverForm)"
      [disabled]="dataService.deliverForm.invalid ||
      store.state.requests.addToDeliver.inProgress ||
      store.state.requests.updateToDeliver.inProgress ||
      store.state.orderStatus === 'Deliver'"
      *ngIf="store.state.userType === 'Seller'"
      >
       {{dataService.buttonName(store.state.orderStatus)}}
      </ion-button>
      <ion-button
        expand="block"
        *ngIf="store.state.userType ==='Buyer' && store.state.orderStatus === 'Deliver'"
        (click)="store.onAddRating()"
        [disabled]="store.state.requests.addRating.inProgress ||
                    store.state.requests.selectRatingByUserId.inProgess ||            
                    store.state.alreadyAddedStoreRating"
      >
        Add Rating
      </ion-button>
    </div>
  </ion-grid>
</ion-content>